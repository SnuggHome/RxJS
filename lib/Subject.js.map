{"version":3,"sources":["../es6/Subject.js"],"names":[],"mappings":"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","file":"Subject.js","sourcesContent":["import Observable from './Observable';\nimport $$observer from './util/Symbol_observer';\nimport Subscription from './Subscription';\nexport default class Subject extends Observable {\n    constructor() {\n        super(null);\n        this.disposed = false;\n        this.observers = [];\n        this.unsubscribed = false;\n    }\n    dispose() {\n        this.disposed = true;\n        if (this._dispose) {\n            this._dispose();\n        }\n    }\n    [$$observer](observer) {\n        this.observers.push(observer);\n        var subscription = new Subscription(null, observer);\n        return subscription;\n    }\n    next(value) {\n        if (this.unsubscribed) {\n            return { done: true };\n        }\n        this.observers.forEach(o => o.next(value));\n        this._cleanUnsubbedObservers();\n        return { done: false };\n    }\n    throw(err) {\n        if (this.unsubscribed) {\n            return { done: true };\n        }\n        this.observers.forEach(o => o.throw(err));\n        this.unsubscribe();\n        this._cleanUnsubbedObservers();\n        return { done: true };\n    }\n    return(value) {\n        if (this.unsubscribed) {\n            return { done: true };\n        }\n        this.observers.forEach(o => o.return(value));\n        this.unsubscribe();\n        this._cleanUnsubbedObservers();\n        return { done: true };\n    }\n    _cleanUnsubbedObservers() {\n        var i;\n        var observers = this.observers;\n        for (i = observers.length; i--;) {\n            if (observers[i].unsubscribed) {\n                observers.splice(i, 1);\n            }\n        }\n        if (observers.length === 0) {\n            this.unsubscribe();\n        }\n    }\n    unsubscribe() {\n        this.observers.length = 0;\n        this.unsubscribed = true;\n    }\n}\nclass SubjectSubscription extends Subscription {\n    constructor(observer, subject) {\n        super(null, observer);\n        this.subject = subject;\n    }\n    unsubscribe() {\n        var observers = this.subject.observers;\n        var index = observers.indexOf(this.observer);\n        if (index !== -1) {\n            observers.splice(index, 1);\n        }\n        super.unsubscribe();\n    }\n}\n"]}